<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Definitive Interactive Historical Timelines</title>
<style>
  :root {
    --start-year: -115000; /* Start year for the timeline */
    --end-year: 2100; /* End year for the timeline */
    --total-years: 117100; /* end-year - start-year */
    --timeline-base-width: 10000px;
    
    /* Timeline Colors */
    --color-eras: #F57C00; /* Orange */
    --color-composers: #FDD835; /* Yellow */
    --color-scientists: #BA68C8; /* Purple */
    --color-rulers: #E57373; /* Red */
    --color-philosophers: #8D6E63; /* Brown */
    --color-writers: #64B5F6; /* Blue */
    --color-crises: #B71C1C; /* Dark Red */
    --color-lifespan-green: #1DB954; /* Green for lifespan */
  }

  body {
    background-color: #121212;
    color: #ffffff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin-left: 0px; 
    padding: 0;
    display: flex;
    align-items: center;
    min-height: 100vh;
    overflow: hidden;
    touch-action: pan-y;
  }

  .timeline-container {
    width: 100%;
    height: 100vh;
    overflow: scroll; /* Ensures both scrollbars are visible */
    box-sizing: border-box;
    cursor: grab;
    touch-action: pan-y pinch-zoom;
    padding-top: 200px; /* Added empty space at the top */
  }
  .timeline-container:active {
      cursor: grabbing;
  }

  .timeline-container::-webkit-scrollbar { height: 12px; width: 12px; }
  .timeline-container::-webkit-scrollbar-track { background: #282828; }
  .timeline-container::-webkit-scrollbar-thumb { background-color: #888; border-radius: 20px; border: 3px solid #282828; }

  .timeline-wrapper {
    width: var(--timeline-base-width);
    height: 100%;
    position: relative;
    padding: 0 50px;
  }

  .timeline-line {
    position: absolute;
    left: 0;
    width: 100%;
    height: 4px;
    border-radius: 2px;
  }

  /* Vertical Positioning of each timeline */
  .timeline-line.eras        { top: 30%; background-color: var(--color-eras); }
  .timeline-line.composers   { top: 40%; background-color: var(--color-composers); }
  .timeline-line.scientists  { top: 50%; background-color: var(--color-scientists); }
  .timeline-line.rulers      { top: 60%; background-color: var(--color-rulers); }
  .timeline-line.philosophers{ top: 70%; background-color: var(--color-philosophers); }
  .timeline-line.writers     { top: 80%; background-color: var(--color-writers); }
  .timeline-line.crises      { top: 90%; background-color: var(--color-crises); }


  .timeline-year {
    position: absolute;
    top: 0;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .timeline-year::before {
    content: '';
    width: 2px;
    height: 100%;
    background-color: rgba(85, 85, 85, 0.5);
    position: absolute;
    top: 0;
    left: 50%;
    z-index: -1;
  }
  
  .timeline-year-label-thousand {
    position: sticky;
    top: 0%;
    font-size: 1.8em;
    font-weight: bold;
    color: #777;
    background-color: #121212;
    padding: 0 10px;
    z-index: 15;
  }

  .timeline-year-label {
    position: sticky;
    top: 7%;
    font-size: 1.4em;
    font-weight: bold;
    color: #555;
    background-color: #121212;
    padding: 0 10px;
    z-index: 15; /* Year labels are high, but below the hovered item */
  }

  .timeline-item {
    position: absolute;
    height: 0;
    display: flex;
    align-items: center;
    z-index: 10; /* Default z-index for items */
  }

  /* On hover, bring the item to the front */
  .timeline-item:hover {
    z-index: 16;
  }

  /* Position items on their respective timelines */
  .timeline-item.era        { top: 30%; }
  .timeline-item.composer   { top: 40%; }
  .timeline-item.scientist  { top: 50%; }
  .timeline-item.ruler      { top: 60%; }
  .timeline-item.philosopher{ top: 70%; }
  .timeline-item.writer     { top: 80%; }
  .timeline-item.crises     { top: 90%; }
  
  .permanent-name {
    position: absolute;
    bottom: 12px;
    left: 0;
    transform: translateX(-50%);
    font-size: 0.8em;
    font-weight: bold;
    color: #ccc;
    white-space: nowrap;
    background: rgba(18, 18, 18, 0.7);
    padding: 2px 6px;
    border-radius: 4px;
    z-index: 11;
  }

  .marker {
    width: 16px;
    height: 16px;
    border: 3px solid #121212;
    border-radius: 50%;
    position: absolute;
    left: 0;
    top: 0;
    transform: translate(-50%, -50%);
    z-index: 12;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .era .marker         { background-color: var(--color-eras); }
  .composer .marker    { background-color: var(--color-composers); }
  .scientist .marker   { background-color: var(--color-scientists); }
  .ruler .marker       { background-color: var(--color-rulers); }
  .philosopher .marker { background-color: var(--color-philosophers); }
  .writer .marker      { background-color: var(--color-writers); }
  .crises .marker      { background-color: var(--color-crises); }

  .lifespan {
    position: absolute;
    left: 0;
    top: 0;
    transform: translateY(-50%);
    height: 6px;
    background-color: transparent;
    z-index: 11;
    transition: all 0.3s ease;
    border-radius: 3px;
  }

  .timeline-item:hover .lifespan { background-color: var(--color-lifespan-green); height: 8px; }

  .event-duration {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    height: 6px;
    background-color: var(--color-crises);
    z-index: 11;
    border-radius: 3px;
  }

  .timeline-content {
    background-color: #282828;
    padding: 15px;
    border-radius: 8px;
    position: absolute;
    left: 0;
    transform: translateX(-50%);
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s ease;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.7);
    width: 280px;
    z-index: 20;
  }
  .timeline-item:hover .timeline-content {
    opacity: 1;
    visibility: visible;
  }
  
  .timeline-item .timeline-content {
      bottom: 30px;
  }
  
  .timeline-content img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    margin-bottom: 10px;
    border: 3px solid;
    background-color: #404040;
    object-fit: cover;
    float: left;
    margin-right: 15px;
  }
  .era .timeline-content img         { border-color: var(--color-eras); }
  .composer .timeline-content img    { border-color: var(--color-composers); }
  .scientist .timeline-content img   { border-color: var(--color-scientists); }
  .ruler .timeline-content img       { border-color: var(--color-rulers); }
  .philosopher .timeline-content img { border-color: var(--color-philosophers); }
  .writer .timeline-content img      { border-color: var(--color-writers); }
  .crises .timeline-content img      { border-color: var(--color-crises); }

  .links { display: flex; justify-content: flex-start; gap: 10px; align-items: center; margin-top: 10px; clear: both; }
  .link { display: inline-block; padding: 6px 12px; color: #ffffff; text-decoration: none; border-radius: 50px; font-weight: bold; transition: background-color 0.3s ease; font-size: 0.8em; }
  
  .spotify-link { background-color: #1DB954; }
  .spotify-link:hover { background-color: #1ed760; }
  
  .wiki-link { background-color: #636466; }
  .wiki-link:hover { background-color: #7c7d7f; }

  .timeline-content h3 { margin: 0 0 5px 0; font-size: 1.1em; line-height: 1.2; }
  .timeline-content p { margin: 5px 0; font-size: 0.9em; color: #ccc; }
  .timeline-content .dates { margin-top: 0; color: #aaa; font-style: italic; }
  
  /* --- Zoom Slider Styles --- */
  .zoom-slider-container {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 300px;
    background-color: rgba(40, 40, 40, 0.8);
    padding: 10px 20px;
    border-radius: 10px;
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 10px;
    color: #ccc;
    font-size: 0.9em;
  }

  input[type="range"] {
    -webkit-appearance: none;
    flex-grow: 1;
    background: transparent;
  }
  input[type="range"]:focus {
    outline: none;
  }
  input[type="range"]::-webkit-slider-runnable-track {
    width: 100%;
    height: 6px;
    cursor: pointer;
    background: #555;
    border-radius: 3px;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    border: 2px solid #333;
    height: 18px;
    width: 18px;
    border-radius: 50%;
    background: #ccc;
    cursor: pointer;
    margin-top: -6px;
  }
  input[type="range"]::-moz-range-track {
    width: 100%;
    height: 6px;
    cursor: pointer;
    background: #555;
    border-radius: 3px;
  }
  input[type="range"]::-moz-range-thumb {
    border: 2px solid #333;
    height: 18px;
    width: 18px;
    border-radius: 50%;
    background: #ccc;
    cursor: pointer;
  }
</style>
</head>
<body>

<div class="timeline-container">
  <div class="timeline-wrapper">
    <!-- Thematic Lines -->
    <div class="timeline-line eras"></div>
    <div class="timeline-line composers"></div>
    <div class="timeline-line scientists"></div>
    <div class="timeline-line rulers"></div>
    <div class="timeline-line philosophers"></div>
    <div class="timeline-line writers"></div>
    <div class="timeline-line crises"></div>
    
    <!-- TIMELINE DATA is now loaded dynamically from external JS files -->

  </div>
</div>

<div class="zoom-slider-container">
  <span>-</span>
  <input type="range" id="zoom-slider" min="0" max="100" value="100">
  <span>+</span>
</div>

<!-- Load Data Scripts -->
<script src="eras.js"></script>
<script src="composers.js"></script>
<script src="scientists.js"></script>
<script src="rulers.js"></script>
<script src="philosophers.js"></script>
<script src="writers.js"></script>
<script src="crises.js"></script>

<!-- Main Interaction Script -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const container = document.querySelector('.timeline-container');
    const wrapper = document.querySelector('.timeline-wrapper');
    const zoomSlider = document.getElementById('zoom-slider');
    const baseWidth = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--timeline-base-width'));
    
    // --- ZOOM LOGIC ---
    const minZoom = 0.05;
    const maxZoom = 200.0; 
    const logMin = Math.log(minZoom);
    const logMax = Math.log(maxZoom);

    let currentZoom = 100.0;
    
    const applyZoom = (newZoomLevel, pivotX) => {
      const newZoom = Math.max(minZoom, Math.min(maxZoom, newZoomLevel));
      const scrollRatio = (container.scrollLeft + pivotX) / wrapper.offsetWidth;
      wrapper.style.width = `${baseWidth * newZoom}px`;
      const newScrollLeft = (wrapper.offsetWidth * scrollRatio) - pivotX;
      container.scrollLeft = newScrollLeft;
      currentZoom = newZoom;
      updateSlider();
    };
    
    const updateSlider = () => {
        const logCurrent = Math.log(currentZoom);
        zoomSlider.value = 100 * (logCurrent - logMin) / (logMax - logMin);
    };

    // --- Mouse Wheel Zoom ---
    container.addEventListener('wheel', (e) => {
      // The 'if (!e.ctrlKey) return;' line has been removed.
      e.preventDefault(); // Prevent the page from scrolling vertically
      const rect = container.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      const zoomFactor = 1 - e.deltaY * 0.005;
      applyZoom(currentZoom * zoomFactor, mouseX);
    }, { passive: false });

    // --- Touch Pinch-to-Zoom ---
    let initialPinchDistance = 0;
    let lastZoom = 1;
    
    const getDistance = (touches) => Math.hypot(touches[0].pageX - touches[1].pageX, touches[0].pageY - touches[1].pageY);

    container.addEventListener('touchstart', (e) => {
      if (e.touches.length === 2) {
        e.preventDefault();
        initialPinchDistance = getDistance(e.touches);
        lastZoom = currentZoom;
      }
    }, { passive: false });

    container.addEventListener('touchmove', (e) => {
      if (e.touches.length === 2) {
        e.preventDefault();
        const rect = container.getBoundingClientRect();
        const pivotX = ((e.touches[0].clientX + e.touches[1].clientX) / 2) - rect.left;
        const newPinchDistance = getDistance(e.touches);
        const zoomRatio = newPinchDistance / initialPinchDistance;
        applyZoom(lastZoom * zoomRatio, pivotX);
      }
    }, { passive: false });
    
    // --- Zoom Slider Control ---
    zoomSlider.addEventListener('input', (e) => {
        const sliderValue = e.target.value / 100;
        const newZoom = Math.exp(logMin + (logMax - logMin) * sliderValue);
        const pivotX = container.clientWidth / 2;
        applyZoom(newZoom, pivotX);
    });

    // --- PAN LOGIC ---
    let isDown = false;
    let startX;
    let scrollLeftStart;

    container.addEventListener('mousedown', (e) => {
      if(e.button !== 0) return;
      isDown = true;
      container.style.cursor = 'grabbing';
      startX = e.pageX - container.offsetLeft;
      scrollLeftStart = container.scrollLeft;
    });

    container.addEventListener('mouseleave', () => { isDown = false; container.style.cursor = 'grab'; });
    container.addEventListener('mouseup', () => { isDown = false; container.style.cursor = 'grab'; });
    
    container.addEventListener('mousemove', (e) => {
      if (!isDown) return;
      e.preventDefault();
      const x = e.pageX - container.offsetLeft;
      const walk = (x - startX) * 2;
      container.scrollLeft = scrollLeftStart - walk;
    });
    
    // --- INITIALIZATION ---
    applyZoom(1.0, container.clientWidth / 2);
    container.scrollLeft = wrapper.offsetWidth;

    // Dynamically generate year markers
    const startYear = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--start-year'));
    const endYear = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--end-year'));
    const totalYears = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--total-years'));
    
    for (let year = -115000; year <= 2100; year += 1000) {
      if (year === 0) continue;
      const yearMarker = document.createElement('div');
      yearMarker.className = 'timeline-year';
      yearMarker.style.left = `calc((${year} - ${startYear}) / ${totalYears} * 100%)`;
      yearMarker.innerHTML = `<span class="timeline-year-label-thousand">${year < 0 ? `${-year} BC` : year}</span>`;
      wrapper.appendChild(yearMarker);
    }
    
    for (let year = -115000; year <= 2100; year += 100) {
      if (year === 0 || year % 1000 === 0) continue;
      const yearMarker = document.createElement('div');
      yearMarker.className = 'timeline-year';
      yearMarker.style.left = `calc((${year} - ${startYear}) / ${totalYears} * 100%)`;
      yearMarker.innerHTML = `<span class="timeline-year-label">${year < 0 ? `${-year} BC` : year}</span>`;
      wrapper.appendChild(yearMarker);
    }
  });
</script>

</body>
</html>
